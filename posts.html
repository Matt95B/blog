---
layout: page
title: Blog posts
---

<style>
  .filter-toggle {
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    gap: 6px;

    font-size: 0.95rem;   /* smaller */
    font-style: italic;  /* italic text */
    font-weight: 400;    /* not bold */
    color: #6b7280;      /* subtle gray */
  }

  #filterIcon {
    font-size: 0.85rem;
    font-style: normal;
  }
</style>

<!-- Search Box -->
<input
  type="text"
  id="searchInput"
  placeholder="Search blog posts..."
  style="width: 100%; padding: 10px; margin-bottom: 20px; font-size: 16px;"
>

<!-- Expandable Tag Filter Section -->
<div style="margin-bottom: 20px;">
  <h3 id="tagToggle" class="filter-toggle">
    <span id="filterIcon">▶</span> Filter by Tag
  </h3>

  <div
    id="tagContainer"
    style="
      margin-top: 10px;
      margin-left: 15px;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    ">

    {% assign all_tags = site.tags | sort %}
    {% for tag in all_tags %}
      <button
        class="tag-button"
        data-tag="{{ tag[0] }}"
        style="
          padding: 6px 12px;
          margin: 5px;
          border: 1px solid #ccc;
          background: #f5f5f5;
          border-radius: 6px;
          cursor: pointer;
          transition: background 0.2s ease;
        ">
        {{ tag[0] }} ({{ tag[1].size }})
      </button>
    {% endfor %}

    <button
      id="clearTags"
      style="
        padding: 6px 12px;
        margin: 5px;
        border: none;
        background: #eee;
        border-radius: 6px;
        cursor: pointer;
        font-weight: bold;
      ">
      Clear Filter
    </button>

  </div>
</div>

<ul class="posts-list list-unstyled" role="list">
  {% for post in site.posts %}
  <li
    class="post-preview post-item"
    data-tags="{% for tag in post.tags %}{{ tag }}{% unless forloop.last %},{% endunless %}{% endfor %}"
  >
    <article>
      <a href="{{ post.url | absolute_url }}">
        <h2 class="post-title">{{ post.title | strip_html }}</h2>

        {% if post.subtitle %}
        <h3 class="post-subtitle">{{ post.subtitle | strip_html }}</h3>
        {% endif %}
      </a>

      {% if post.author %}
      <span>By <strong>{{ post.author | strip_html }}</strong></span>
      {% endif %}

      <p class="post-meta">
        {% assign date_format = site.date_format | default: "%B %-d, %Y" %}
        Posted on {{ post.date | date: date_format }}
      </p>

      {% if site.feed_show_tags != false and post.tags.size > 0 %}
      <div class="blog-tags">
        <span>Tags:</span>
        <ul class="d-inline list-inline" role="list">
          {% for tag in post.tags %}
          <li class="list-inline-item">
            <a href="{{ '/tags' | absolute_url }}#{{ tag }}">{{ tag }}</a>
          </li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}
    </article>
  </li>
  {% endfor %}
</ul>


<script>
  const searchInput = document.getElementById("searchInput");
  const posts = document.querySelectorAll(".post-item");
  const tagButtons = document.querySelectorAll(".tag-button");
  const clearTagsButton = document.getElementById("clearTags");

  const tagToggle = document.getElementById("tagToggle");
  const tagContainer = document.getElementById("tagContainer");
  const filterIcon = document.getElementById("filterIcon");

  let activeTag = null;
  let tagsExpanded = false;

  // ----- Expand / Collapse Tag Filter -----
  tagToggle.addEventListener("click", () => {
    tagsExpanded = !tagsExpanded;

    if (tagsExpanded) {
      tagContainer.style.maxHeight = tagContainer.scrollHeight + "px";
      filterIcon.textContent = "▼";
    } else {
      tagContainer.style.maxHeight = "0";
      filterIcon.textContent = "▶";
    }
  });


  // ----- Highlight Active Tag -----
  function highlightActiveTag() {
    tagButtons.forEach(btn => {
      if (btn.dataset.tag === activeTag) {
        btn.style.background = "#d0e6ff";
        btn.style.borderColor = "#4a90e2";
        btn.style.fontWeight = "bold";
      } else {
        btn.style.background = "#f5f5f5";
        btn.style.borderColor = "#ccc";
        btn.style.fontWeight = "normal";
      }
    });
  }

  // ----- Filtering Logic -----
  function applyFilters() {
    const search = searchInput.value.toLowerCase();

    posts.forEach(post => {
      const text = post.textContent.toLowerCase();
      const tags = post.dataset.tags ? post.dataset.tags.split(",") : [];

      const matchesSearch = text.includes(search);
      const matchesTag = !activeTag || tags.includes(activeTag);

      post.style.display = (matchesSearch && matchesTag) ? "" : "none";
    });
  }

  // Search
  searchInput.addEventListener("keyup", applyFilters);

  // Tag click
  tagButtons.forEach(button => {
    button.addEventListener("click", () => {
      activeTag = button.dataset.tag;
      highlightActiveTag();
      applyFilters();
    });
  });

  // Clear tag filter
  clearTagsButton.addEventListener("click", () => {
    activeTag = null;
    highlightActiveTag();
    applyFilters();
  });
</script>